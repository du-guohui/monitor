global.webpackJsonp([15],{"/jSC":function(t,n){},M93x:function(t,n,e){"use strict";var o=e("Mw+1");var a=function(t){e("/jSC")},i=e("ybqe")(o.a,null,a,null,null);n.a=i.exports},"Mw+1":function(t,n,e){"use strict";var o=e("mvHQ"),a=e.n(o),i=e("olkN");n.a={mpType:"app",computed:{login:function(){return i.a.state.Login},list:function(){return i.a.state.List}},methods:{Setting:function(){var t=this;wx.getSetting({success:function(n){n.authSetting["scope.userInfo"]&&""!=wx.getStorageSync("UserInfo")?t.Login():wx.reLaunch({url:"/pages/login/index"})}})},WebSocket:function(){wx.connectSocket({url:this.$wss,method:"GET",header:{"content-type":"application/json"},success:function(t){console.log("连接成功"+a()(t))},fail:function(t){console.log("连接失败"+t)}}),wx.onSocketOpen(function(t){wx.sendSocketMessage({data:a()({Authorization:wx.getStorageSync("Authorization")})})}),wx.onSocketError(function(t){console.log("WebSocket 发生错误！")}),wx.onSocketClose(function(t){console.log("WebSocket 已关闭！")}),wx.onSocketMessage(function(t){i.a.commit("Update",t.data)})},Login:function(){var t=this;wx.login({success:function(n){if(n.code){var e=JSON.parse(wx.getStorageSync("UserInfo"));t.ajax("user/login",{code:n.code,nickName:e.nickName,gender:e.gender,country:e.country,province:e.country,city:e.country,avatarUrl:e.avatarUrl}).then(function(n){wx.setStorage({key:"Authorization",data:n.content,success:function(){t.GetList()}})})}else console.log("登录失败！"+n.errMsg)}})},GetList:function(){this.ajax("device/getDeviceListPacketByGroup",{no_fake:!0}).then(function(t){i.a.commit("DeviceList",t)}),this.ajax("alarm/alarm/").then(function(t){t.length>"0"&&i.a.commit("AlarmList",t)})}},created:function(){this.Setting()},watch:{login:function(){this.Login()},list:function(){this.GetList()}}}},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("Dd8w"),a=e.n(o),i=e("//Fk"),c=e.n(i),s=e("5nAL"),r=e.n(s),u=e("M93x"),g=e("D4CW"),l=e("2FZb"),f=e("Irxk");e.n(f);r.a.use(g.a),r.a.prototype.$url="https://nhjk.uniteddata.com",r.a.prototype.$wss="wss://nhjk.uniteddata.com/wss",r.a.prototype.ajax=function(t,n,e){var o=this;return new c.a(function(a,i){wx.request({url:o.$url+"/"+t,data:n,method:e||"GET",header:{Authorization:wx.getStorageSync("Authorization"),"Content-Type":"application/x-www-form-urlencoded"},success:function(t){a(t.data)},fail:function(t){i(t)}})})},r.a.prototype.Toast=function(t,n){Object(l.d)().show({type:t,duration:1500,color:"#ffffff",text:n})},r.a.filter("Rounding",function(t){return(t=Number(t)).toFixed(0)}),r.a.config.productionTip=!1,u.a.mpType="app",new r.a(a()({},u.a)).$mount(),n.default={config:{pages:[],window:{backgroundTextStyle:"light",navigationBarBackgroundColor:"#0093fb",navigationBarTextStyle:"white",enablePullDownRefresh:!1},permission:{"scope.userLocation":{desc:"你的位置信息将用于小程序获取天气信息"}},tabBar:{borderStyle:"white",color:"#666666",backgroundColor:"#ffffff",selectedColor:"#0093fb",list:[{selectedIconPath:"static/img/1.png",iconPath:"static/img/5.png",pagePath:"pages/index/index",text:"分析"},{selectedIconPath:"static/img/2.png",iconPath:"static/img/6.png",pagePath:"pages/list/index",text:"设备"},{selectedIconPath:"static/img/3.png",iconPath:"static/img/7.png",pagePath:"pages/alarm/index",text:"报警"},{selectedIconPath:"static/img/4.png",iconPath:"static/img/8.png",pagePath:"pages/my/index",text:"我的"}]}}}}},["NHnr"]);