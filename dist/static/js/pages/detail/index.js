global.webpackJsonp([8],{"/Fln":function(t,i,a){"use strict";var e=a("xy8G"),s=a("mtz8");var n=function(t){a("zC/d")},r=a("ybqe")(e.a,s.a,n,"data-v-445a41ed",null);i.a=r.exports},mtz8:function(t,i,a){"use strict";var e={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"container"},[a("div",{staticClass:"boxs"},[t.data?a("div",{staticClass:"box"},[a("a",{staticClass:"edit",attrs:{href:"/pages/device/index?id="+t.data.id+"&img_url="+t.data.img_url+"&device_group="+t.data.device_group_id}},[a("img",{attrs:{src:"/static/img/9.png",alt:""}})]),t._v(" "),a("div",{staticClass:"name"},[t._v(t._s(t.data.name))]),t._v(" "),t.data.img_url?a("div",{staticClass:"img",style:{backgroundImage:"url("+t.serverUrl+t.data.img_url+")"}}):a("div",{staticClass:"no-img"},[a("img",{attrs:{src:"/static/img/18.png",alt:""}}),t._v(" "),a("div",{staticClass:"txt"},[t._v("未上传位置图片")])])]):t._e(),t._v(" "),t.data?a("div",{staticClass:"detail-list grid"},[a("wux-row",{attrs:{mpcomid:"3"}},[a("wux-col",{attrs:{span:t.data.light?"4":"6",eventid:"0",mpcomid:"0"},on:{click:function(i){t.tabIndex="0"}}},[a("div",{staticClass:"temperature li"},[a("img",{staticClass:"ioc",attrs:{src:"/static/img/14.png"}}),t._v(" "),"0"==t.tabIndex?a("img",{staticClass:"ac",attrs:{src:"/static/img/ac.png"}}):t._e(),t._v(" "),t.data.temperature?a("span",{staticClass:"ts"},[t.data.temperature?a("span",[t._v(t._s(t._f("Rounding")(t.data.temperature)))]):t._e(),t._v("°C\n            ")]):a("span",{staticClass:"ts"},[t._v("-")])])]),t._v(" "),a("wux-col",{attrs:{span:t.data.light?"4":"6",eventid:"1",mpcomid:"1"},on:{click:function(i){t.tabIndex="1"}}},[a("div",{staticClass:"humidity li"},[a("img",{staticClass:"ioc",attrs:{src:"/static/img/10.png"}}),t._v(" "),"1"==t.tabIndex?a("img",{staticClass:"ac",attrs:{src:"/static/img/ac.png"}}):t._e(),t._v(" "),t.data.humidity?a("span",{staticClass:"ts color1"},[t._v(t._s(t._f("Rounding")(t.data.humidity))+"%")]):a("span",{staticClass:"ts color1"},[t._v("-")])])]),t._v(" "),t.data.light?a("wux-col",{attrs:{span:"4",eventid:"2",mpcomid:"2"},on:{click:function(i){t.tabIndex="2"}}},[a("div",{staticClass:"light li"},[a("img",{staticClass:"ioc",attrs:{src:"/static/img/19.png"}}),t._v(" "),"2"==t.tabIndex?a("img",{staticClass:"ac",attrs:{src:"/static/img/ac.png"}}):t._e(),t._v(" "),t.data.light?a("span",{staticClass:"ts"},[t._v(t._s(t._f("Rounding")(t.data.light))+"Lx")]):a("span",{staticClass:"ts"},[t._v("-")])])]):t._e()],1)],1):t._e()]),t._v(" "),a("div",{staticClass:"detail-time"},[t.timeX?a("div",{staticClass:"time-sc"},[t._v("时间: "+t._s(t.timeX))]):t._e(),t._v(" "),t._l(t.timeList,function(i,e){return a("div",{key:e,staticClass:"button",class:{ac:t.timeIndex==e},attrs:{eventid:"3-"+e},on:{click:function(i){t.timeIndex=e}}},[t._v("\n      "+t._s(i.title)+"\n      "),a("img",{staticClass:"ioc",attrs:{src:"/static/img/ac.png",alt:""}})])})],2),t._v(" "),a("div",{staticClass:"ff-canvas"},[a("ff-canvas",{attrs:{id:"column","canvas-id":"column",opts:t.opts,mpcomid:"4"}}),t._v(" "),"0"==t.none?a("div",{staticClass:"no-none"},[t._v("暂无数据")]):t._e()],1),t._v(" "),t.data?a("wux-cell-group",{attrs:{mpcomid:"6"}},[a("wux-cell",{attrs:{title:"报警信息",isLink:"",url:"/pages/detailAlarm/index?devEui="+t.data.devEui,mpcomid:"5"}})],1):t._e(),t._v(" "),a("wux-loading",{attrs:{id:"wux-loading",mpcomid:"7"}})],1)},staticRenderFns:[]};i.a=e},xy8G:function(t,i,a){"use strict";var e=a("pFYg"),s=a.n(e),n=(a("G/BZ"),a("FmT9")),r=a.n(n),c=a("olkN"),o=(a("2FZb"),a("0xDb"));r.a.Util.addEventListener=function(t,i,a){t.addListener(i,a)},r.a.Util.removeEventListener=function(t,i,a){t.removeListener(i,a)},r.a.Util.createEvent=function(t,i){var a=t.type,e=0,s=0,n=t.touches;return n&&n.length>0&&(e=n[0].x,s=n[0].y),{type:a,chart:i,x:e,y:s}},i.a={computed:{DeviceList:function(){return c.a.state.Data.Device}},data:function(){return{data:"",tabIndex:0,tabList:[{val:"temperature",name:"温度",alias:"°C"},{val:"humidity",name:"湿度",alias:"%"},{val:"light",name:"光照",alias:"Lx"}],timeList:[{title:"日",key:"1",type:"avg",mask:"MM-DD hh:mm",tickCount:4,res:["avg"]},{title:"周",key:"7",type:"max_and_min",mask:"MM-DD",tickCount:7,res:["max","min"]},{title:"月",key:"30",type:"max_and_min",mask:"MM-DD",tickCount:7,res:["max","min"]}],timeIndex:0,serverUrl:"",opts:{lazyLoad:!0},ChartData:[[],[],[]],timeX:"",none:""}},methods:{GetData:function(){var t=this;if(this.DeviceList.length>"0"){var i=this.DeviceList,a=[];for(var e in i){var s=i[e].device_list;for(var n in s)a.push(s[n])}var r=a.filter(function(i){return i.devEui==t.$route.query.devEui});this.data=r[0]}else setTimeout(function(){t.GetData()},300)},GetList:function(){var t=this,i=this.ChartData[this.timeIndex];"0"==i.length?t.ajax("device/getDeviceHistoryData",{devEui:t.$route.query.devEui,period:t.timeList[t.timeIndex].key,type:t.timeList[t.timeIndex].type}).then(function(a){var e=a.content;for(var s in e){var n=Object(o.a)(e[s],s,t.tabList[t.tabIndex].name);for(var r in n)i.push(n[r])}t.ChartsUp()}):t.ChartsUp()},ChartsUp:function(){var t=this;this.$mp.page.selectComponent("#column").init(this.initChart),setTimeout(function(){t.none=t.ChartData[t.timeIndex].filter(function(t){return t.value}).length},400)},initChart:function(t,i,a){var e=this,n=null;n=new r.a.Chart({el:t,width:i,height:a});var c={time:{type:"timeCat",mask:e.timeList[e.timeIndex].mask,tickCount:e.timeList[e.timeIndex].tickCount,range:[0,1]},value:{tickCount:5,alias:e.tabList[e.tabIndex].name,formatter:function(t){return""==t?t:Number(t).toFixed(1)+e.tabList[e.tabIndex].alias}}};return n.source(function(t){var i=t.filter(function(t){return t.types==e.tabList[e.tabIndex].val});if(i){var a=function(){var t=e.timeList[e.timeIndex].res,a=[],s=function(e){var s=i.filter(function(i){return i.res==t[e]});for(var n in s){var r=s[n];"max"==r.res?("温度"!=r.type&&"湿度"!=r.type&&"光照"!=r.type||(r.type="最高"+r.type),a.push(r)):"min"==r.res?("温度"!=r.type&&"湿度"!=r.type&&"光照"!=r.type||(r.type="最低"+r.type),a.push(r)):a.push(r)}};for(var n in t)s(n);return{v:a}}();if("object"===(void 0===a?"undefined":s()(a)))return a.v}}(e.ChartData[e.timeIndex]),c),n.axis("time",{label:function(t,i,a){var e={};return 0===i?e.textAlign="left":i===a-1&&(e.textAlign="right"),e}}),n.tooltip({showCrosshairs:!0,onChange:function(t){e.timeX=t.items[0].title,e.leftX=t.x},onHide:function(){e.timeX=""}}),"avg"==e.timeList[e.timeIndex].type?(n.line().position("time*value"),n.area().position("time*value").style({stroke:"#fff",lineWidth:1})):(n.area().position("time*value").color("type").shape("type",function(t){return"最高"===t?"line":"最低"===t?"line":void 0}),n.line().position("time*value").color("type")),n.render(),n}},mounted:function(){this.ChartData=[[],[],[]],this.serverUrl=this.$url,this.tabIndex=0,this.timeIndex=0,this.none="",this.GetData(),this.GetList()},watch:{timeIndex:function(){this.GetList()},tabIndex:function(){this.ChartsUp()}}}},"zC/d":function(t,i){}},["mzm9"]);