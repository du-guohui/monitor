global.webpackJsonp([8],{"/Fln":function(t,a,i){"use strict";var e=i("xy8G"),s=i("mtz8");var n=function(t){i("zC/d")},r=i("ybqe")(e.a,s.a,n,"data-v-445a41ed",null);a.a=r.exports},mtz8:function(t,a,i){"use strict";var e={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"container"},[i("div",{staticClass:"boxs"},[t.data?i("div",{staticClass:"box"},[i("button",{staticClass:"shareBtn",attrs:{"data-name":"shareBtn","open-type":"share"}}),t._v(" "),i("img",{staticClass:"shareBtn-img",attrs:{src:"/static/img/share.png",alt:""}}),t._v(" "),i("a",{staticClass:"edit",attrs:{href:"/pages/device/index?id="+t.data.id+"&img_url="+t.data.img_url+"&device_group="+t.data.device_group_id}},[i("img",{attrs:{src:"/static/img/9.png"}})]),t._v(" "),i("div",{staticClass:"name"},[t._v(t._s(t.data.name))]),t._v(" "),t.data.img_url?i("div",{staticClass:"img",style:{backgroundImage:"url("+t.serverUrl+t.data.img_url+")"}}):i("div",{staticClass:"no-img"},[i("img",{attrs:{src:"/static/img/18.png",alt:""}}),t._v(" "),i("div",{staticClass:"txt"},[t._v("未上传位置图片")])])],1):t._e(),t._v(" "),t.data?i("div",{staticClass:"detail-list grid"},[i("wux-row",{attrs:{mpcomid:"3"}},[i("wux-col",{attrs:{span:t.data.light?"4":"6",eventid:"0",mpcomid:"0"},on:{click:function(a){t.tabIndex="0"}}},[i("div",{staticClass:"temperature li"},[i("img",{staticClass:"ioc",attrs:{src:"/static/img/14.png"}}),t._v(" "),"0"==t.tabIndex?i("img",{staticClass:"ac",attrs:{src:"/static/img/ac.png"}}):t._e(),t._v(" "),t.data.temperature?i("span",{staticClass:"ts"},[t.data.temperature?i("span",[t._v(t._s(t._f("Rounding")(t.data.temperature)))]):t._e(),t._v("°C\n            ")]):i("span",{staticClass:"ts"},[t._v("-")])])]),t._v(" "),i("wux-col",{attrs:{span:t.data.light?"4":"6",eventid:"1",mpcomid:"1"},on:{click:function(a){t.tabIndex="1"}}},[i("div",{staticClass:"humidity li"},[i("img",{staticClass:"ioc",attrs:{src:"/static/img/10.png"}}),t._v(" "),"1"==t.tabIndex?i("img",{staticClass:"ac",attrs:{src:"/static/img/ac.png"}}):t._e(),t._v(" "),t.data.humidity?i("span",{staticClass:"ts color1"},[t._v(t._s(t._f("Rounding")(t.data.humidity))+"%")]):i("span",{staticClass:"ts color1"},[t._v("-")])])]),t._v(" "),t.data.light?i("wux-col",{attrs:{span:"4",eventid:"2",mpcomid:"2"},on:{click:function(a){t.tabIndex="2"}}},[i("div",{staticClass:"light li"},[i("img",{staticClass:"ioc",attrs:{src:"/static/img/19.png"}}),t._v(" "),"2"==t.tabIndex?i("img",{staticClass:"ac",attrs:{src:"/static/img/ac.png"}}):t._e(),t._v(" "),t.data.light?i("span",{staticClass:"ts"},[t._v(t._s(t._f("Rounding")(t.data.light))+"Lx")]):i("span",{staticClass:"ts"},[t._v("-")])])]):t._e()],1)],1):t._e()]),t._v(" "),i("div",{staticClass:"detail-time"},[t.timeX?i("div",{staticClass:"time-sc"},[t._v("时间: "+t._s(t.timeX))]):t._e(),t._v(" "),t._l(t.timeList,function(a,e){return i("div",{key:e,staticClass:"button",class:{ac:t.timeIndex==e},attrs:{eventid:"3-"+e},on:{click:function(a){t.timeIndex=e}}},[t._v("\n      "+t._s(a.title)+"\n      "),i("img",{staticClass:"ioc",attrs:{src:"/static/img/ac.png",alt:""}})])})],2),t._v(" "),i("div",{staticClass:"ff-canvas"},[i("ff-canvas",{attrs:{id:"column","canvas-id":"column",opts:t.opts,mpcomid:"4"}}),t._v(" "),"0"==t.none?i("div",{staticClass:"no-none"},[t._v("暂无数据")]):t._e()],1),t._v(" "),t.data?i("wux-cell-group",{attrs:{mpcomid:"6"}},[i("wux-cell",{attrs:{title:"报警信息",isLink:"",url:"/pages/detailAlarm/index?devEui="+t.data.devEui,mpcomid:"5"}})],1):t._e(),t._v(" "),i("wux-loading",{attrs:{id:"wux-loading",mpcomid:"7"}})],1)},staticRenderFns:[]};a.a=e},xy8G:function(t,a,i){"use strict";var e=i("pFYg"),s=i.n(e),n=(i("G/BZ"),i("FmT9")),r=i.n(n),c=i("olkN"),o=(i("2FZb"),i("0xDb"));r.a.Util.addEventListener=function(t,a,i){t.addListener(a,i)},r.a.Util.removeEventListener=function(t,a,i){t.removeListener(a,i)},r.a.Util.createEvent=function(t,a){var i=t.type,e=0,s=0,n=t.touches;return n&&n.length>0&&(e=n[0].x,s=n[0].y),{type:i,chart:a,x:e,y:s}},a.a={computed:{DeviceList:function(){return c.a.state.Data.Device}},data:function(){return{data:"",tabIndex:0,tabList:[{val:"temperature",name:"温度",alias:"°C"},{val:"humidity",name:"湿度",alias:"%"},{val:"light",name:"光照",alias:"Lx"}],timeList:[{title:"日",key:"1",type:"avg",mask:"MM-DD hh:mm",tickCount:4,res:["avg"]},{title:"周",key:"7",type:"max_and_min",mask:"MM-DD",tickCount:7,res:["max","min"]},{title:"月",key:"30",type:"max_and_min",mask:"MM-DD",tickCount:7,res:["max","min"]}],timeIndex:0,serverUrl:"",opts:{lazyLoad:!0},ChartData:[[],[],[]],timeX:"",none:""}},methods:{GetData:function(){var t=this;if(this.DeviceList.length>"0"){var a=this.DeviceList,i=[];for(var e in a){var s=a[e].device_list;for(var n in s)i.push(s[n])}var r=i.filter(function(a){return a.devEui==t.$route.query.devEui});this.data=r[0]}else setTimeout(function(){t.GetData()},300)},GetList:function(){var t=this,a=this.ChartData[this.timeIndex];"0"==a.length?t.ajax("device/getDeviceHistoryData",{devEui:t.$route.query.devEui,period:t.timeList[t.timeIndex].key,type:t.timeList[t.timeIndex].type}).then(function(i){var e=i.content;for(var s in e){var n=Object(o.a)(e[s],s,t.tabList[t.tabIndex].name);for(var r in n)a.push(n[r])}t.ChartsUp()}):t.ChartsUp()},ChartsUp:function(){var t=this;this.$mp.page.selectComponent("#column").init(this.initChart),setTimeout(function(){t.none=t.ChartData[t.timeIndex].filter(function(t){return t.value}).length},400)},initChart:function(t,a,i){var e=this,n=null;n=new r.a.Chart({el:t,width:a,height:i});var c={time:{type:"timeCat",mask:e.timeList[e.timeIndex].mask,tickCount:e.timeList[e.timeIndex].tickCount,range:[0,1]},value:{tickCount:5,alias:e.tabList[e.tabIndex].name,formatter:function(t){return""==t?t:Number(t).toFixed(1)+e.tabList[e.tabIndex].alias}}};return n.source(function(t){var a=t.filter(function(t){return t.types==e.tabList[e.tabIndex].val});if(a){var i=function(){var t=e.timeList[e.timeIndex].res,i=[],s=function(e){var s=a.filter(function(a){return a.res==t[e]});for(var n in s){var r=s[n];"max"==r.res?("温度"!=r.type&&"湿度"!=r.type&&"光照"!=r.type||(r.type="最高"+r.type),i.push(r)):"min"==r.res?("温度"!=r.type&&"湿度"!=r.type&&"光照"!=r.type||(r.type="最低"+r.type),i.push(r)):i.push(r)}};for(var n in t)s(n);return{v:i}}();if("object"===(void 0===i?"undefined":s()(i)))return i.v}}(e.ChartData[e.timeIndex]),c),n.axis("time",{label:function(t,a,i){var e={};return 0===a?e.textAlign="left":a===i-1&&(e.textAlign="right"),e}}),n.tooltip({showCrosshairs:!0,onChange:function(t){e.timeX=t.items[0].title,e.leftX=t.x},onHide:function(){e.timeX=""}}),"avg"==e.timeList[e.timeIndex].type?(n.line().position("time*value"),n.area().position("time*value").style({stroke:"#fff",lineWidth:1})):(n.area().position("time*value").color("type").shape("type",function(t){return"最高"===t?"line":"最低"===t?"line":void 0}),n.line().position("time*value").color("type")),n.render(),n}},mounted:function(){this.ChartData=[[],[],[]],this.serverUrl=this.$url,this.tabIndex=0,this.timeIndex=0,this.none="",this.GetData(),this.GetList()},onShareAppMessage:function(t){return{title:JSON.parse(wx.getStorageSync("UserInfo")).nickName+"分享设备-"+this.data.name,path:"/pages/list/index?shareId="+this.data.id,imageUrl:"/static/img/share-back.jpg",success:function(t){t.errMsg},fail:function(){"shareAppMessage:fail cancel"==res.errMsg||res.errMsg}}},watch:{timeIndex:function(){this.GetList()},tabIndex:function(){this.ChartsUp()}}}},"zC/d":function(t,a){}},["mzm9"]);